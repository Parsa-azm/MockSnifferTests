# Pankti Experiments

- This project is created to work on the Pankti Project on different cases, and trying to combine the results with MockSniffer.
- Source code of Pankti can be found [here](https://github.com/castor-software/pankti) alongside with a link to the original paper.

## Some notes on the experiment of Pankti with commons-io project
Commons-io project uses junit-jupiter instead of junit.
In order to add generated tests of Pankti to such project, one should keep the following notes in mind:
- Add _xstream_ dependency to your project
```
<dependency>
    <groupId>com.thoughtworks.xstream</groupId>
    <artifactId>xstream</artifactId>
    <version>1.4.12</version>
</dependency>
```
- Change parts of generated tests which are using _org.junit_ and use proper _org.junit.jupiter_ package instead.
- Add xml files created by Pankti (under the object-data directory, such as [these files](./commons-io/multiple-digest-output-stream/output/object-data))
to the _resources_ directory under project _test_ directory.
- If encountered any problem with xstream converters, such as this one:
```
com.thoughtworks.xstream.converters.ConversionException: 
No converter available
---- Debugging information ----
message             : No converter available
type                : java.io.FileCleanable
converter           : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
message[1]          : Unable to make field jdk.internal.ref.PhantomCleanable jdk.internal.ref.PhantomCleanable.prev accessible: module java.base does not "opens jdk.internal.ref" to unnamed module @43b9fd5
class               : java.io.FileDescriptor
required-type       : java.io.FileDescriptor
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /org.carlspring.commons.io.MultipleDigestOutputStream/out/fd/cleanup
line number         : 9
class[1]            : java.io.FileOutputStream
required-type[1]    : java.io.FileOutputStream
class[2]            : org.carlspring.commons.io.MultipleDigestOutputStream
required-type[2]    : org.carlspring.commons.io.MultipleDigestOutputStream
version             : 1.4.12
-------------------------------

```
try adding [these converters](./converters) to your project and this block of code to the tests file generated by Pankti:
```
import converters.FileCleanableConverter;
import converters.CleanerImplConverter;
import converters.InflaterConverter;
import org.junit.jupiter.api.BeforeEach;
@BeforeEach
public void setxStream() {
    xStream.registerConverter(new FileCleanableConverter());
    xStream.registerConverter(new CleanerImplConverter());
    xStream.registerConverter(new InflaterConverter());
}
```